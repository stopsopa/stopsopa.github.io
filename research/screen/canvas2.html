<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SCREEN</title>

    <style>
      video {
        width: 200px;
        height: 200px;
        border: 1px solid red;
      }
      canvas {
        border: 1px solid green;
        width: 200px;
        height: 200px;
      }
    </style>
  </head>
  <body>
    <button>button</button>
    <canvas></canvas>
    <video playsinline autoplay></video>
    <script>
      // Put variables in global scope to make them available to the browser console.
      const video = document.querySelector("video");
      const canvas = (window.canvas = document.querySelector("canvas"));
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;

      const button = document.querySelector("button");

      const constraints = {
        audio: false,
        video: true,
      };
      button.onclick = function () {
        function handleSuccess(stream) {
          video.srcObject = stream;
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          canvas.getContext("2d").drawImage(video, 0, 0 /*, canvas.width, canvas.height*/);
        }

        navigator.mediaDevices.getDisplayMedia(constraints).then(handleSuccess);
      };
    </script>

    <a href="https://codepen.io/a2sheppy/pen/RqeMaL">https://codepen.io/a2sheppy/pen/RqeMaL</a>
    <br />
    <a href="https://webrtc.internaut.com/iit-2019/screen-capture/"
      >https://webrtc.internaut.com/iit-2019/screen-capture/</a
    >
    <br />
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas"
      >https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas</a
    >
  </body>
</html>
