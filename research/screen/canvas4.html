<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SCREEN</title>

    <style>
      video {
        width: 200px;
        height: 200px;
        border: 1px solid red;
      }
      canvas {
        border: 1px solid green;
        width: 200px;
        height: 200px;
      }
    </style>
  </head>
  <body>
    <canvas></canvas>
    <video
      src="http://upload.wikimedia.org/wikipedia/commons/7/79/Big_Buck_Bunny_small.ogv"
      controls
      playsinline
      autoplay
    ></video>
    <script>
      // Put variables in global scope to make them available to the browser console.
      const video = document.querySelector("video");

      const canvas = document.querySelector("canvas");

      // let play = false;
      // const stop = () => (play = false);
      // video.addEventListener("ended", stop);
      // video.addEventListener("pause", stop);
      // video.addEventListener("play", (event) => {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      
      // play = true;
      (function copy() {
        // if (!play) {
        //   return;
        // }
        console.log("play");
        window.requestAnimationFrame(() => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
          canvas.getContext("2d").drawImage(video, 0, 0, canvas.width, canvas.height);
          copy();
        });
      })();
      // });
    </script>

    <a href="https://codepen.io/a2sheppy/pen/RqeMaL">https://codepen.io/a2sheppy/pen/RqeMaL</a>
    <br />
    <a href="https://webrtc.internaut.com/iit-2019/screen-capture/"
      >https://webrtc.internaut.com/iit-2019/screen-capture/</a
    >
    <br />
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas"
      >https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas</a
    >
  </body>
</html>
