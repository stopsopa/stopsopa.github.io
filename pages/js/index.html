<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>stopsopa.github.io</title>
    <script src="/js/github.js"></script>
</head>
<body class="layout" head foot>

    <div class="body">
        <div class="inside">

            <div class="cards">

                <h2>Node</h2>
                <a href="/pages/js/node/index.html">node</a>
                <h2>React - es6 syntax snippets</h2>
                <a href="https://gist.github.com/stopsopa/3f076fd92b03136cc28b8b91a1ffdad8">https://gist.github.com/stopsopa/3f076fd92b03136cc28b8b91a1ffdad8</a>

                <h2>inheritance</h2>
                <a href="/research/js/008-inheritance.html">/research/js/008-inheritance.html</a>
                <h2>jest</h2>
                <a href="https://github.com/stopsopa/roderic-legacy/tree/master/test/jest">https://github.com/stopsopa/roderic-legacy/tree/master/test/jest</a>

                <h2>mouseenter, mouseleave, mouseover, mouseout, input[type="range"]</h2>
                <a href="/other/selectors/#hover">hover</a>

                <h2>UMD (Universal Module Definition)</h2>
                <a href="https://github.com/umdjs/umd#tooling">https://github.com/umdjs/umd#tooling</a>
                <br />
                <a href="https://gist.github.com/stopsopa/8297755373fd5be34165cc8e12d35642">gist (UMD - browser global & node module (singleton))</a>

                <script type="editor" data-lang="js">
                
(function (root, name, factory) {

    var log=(function(){try{return console.log}catch(e){return function (){}}}());

    var node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';

    try {
        // const instance = factory(root, root.b, log, node);
        const instance = factory(root, log, node);

        const nc = root[name];

        instance.noConflict || (instance.noConflict = function(){root[name]=nc;return instance})

        // Browser globals
        root[name] = instance;
    }
    catch (e) {
        log("UMD (" + name + "): can't assign to root, reason: ", e + '');
    }

    if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        //module.exports = factory({}, require('b'), log, node);
        module.exports = factory(root, log, node);
    }

}(typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : this), 'lib', function (root, log, node) {

    // root - is just for access
    // node - to detect if this is node environment

    // just build tool and return, don't worry about attaching do window|object (browser mode)
    var tool = function () {};

    return tool;

}));

                </script>
                <h2>safe console.log</h2>
                <script type="editor" data-lang="js">

// just log
var log=(function(){try{return console.log}catch(e){return function(){}}}());

// tlog
const tlog = (function () {

    var log=(function(){try{return console.log}catch(e){return function(){}}}());

    const time = () => (new Date()).toISOString().substring(0, 19).replace('T', ' ')

    return (...args) => {
        log.call(this, time(), ...args.map(a => a + ''));
    }
}());

// module
const log=(function(){try{return console.log}catch(e){return function(){}}}());

const time = () => (new Date()).toISOString().substring(0, 19).replace('T', ' ')

module.exports = (...args) => {
    log.call(this, time(), ...args.map(a => a + ''));
}

// node inspect
const i = require('util').inspect;

console.log(i(t, {
    depth:  50,
    colors: true,
    compact: true,
    // breakLength: 80,
}))                

                </script>
                <h2>inheritance</h2>
                <script type="editor" data-lang="js">
        function Shape () {
        }
        function Rectangle () {
            Shape.apply(this, arguments)
        }
        Rectangle.prototype = Object.create(Shape.prototype);
        Rectangle.prototype.constructor = Rectangle;
        Rectangle.prototype.getArea = function () {
        }
                </script>
                <h2>system info</h2>
                <script type="editor" data-lang="js">
                
npx envinfo

                </script>
                <h2>trim</h2>
                <script type="editor" data-lang="js">

/*!
 * @version 1.0 - 2013-05-21
 * @author Szymon DziaÅ‚owski
 * direction : 'rl'|'r'|'l'   -->   (undefined => 'rl')
 * charlist  : (undefined => " \n")
 */ 
function trim(string, charlist, direction) {
  direction = direction || 'rl';
  charlist  = (charlist || '').replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1');
  charlist  = charlist || " \\n";
  (direction.indexOf('r')+1) && (string = string.replace(new RegExp('^(.*?)['+charlist+']*$','gm'),'$1'));
  (direction.indexOf('l')+1) && (string = string.replace(new RegExp('^['+charlist+']*(.*)$','gm'),'$1'));  
  return string;  
}   
                    
                </script>
                <h2>Proxy getter</h2>
                <script type="editor" data-lang="js">
let target = {
    a: 'b',
    c: 'd',
};

let handler = {
    get(target, propKey, receiver) {

        if (typeof target[propKey] !== 'undefined') {

            return target[propKey];
        }

        const keys = Object.keys(target);

        throw `No such manager '${propKey}', registered managers: ` + keys.join(', ');
    }
};
let proxy = new Proxy(target, handler);

console.log(proxy.a);
console.log(proxy.c);
console.log(proxy.b);           
                </script>
                <h2>Event Delegation</h2>
                <script type="editor" data-lang="js">

    // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill
    if (!Element.prototype.matches) {
        Element.prototype.matches =
            Element.prototype.matchesSelector ||
            Element.prototype.mozMatchesSelector ||
            Element.prototype.msMatchesSelector ||
            Element.prototype.oMatchesSelector ||
            Element.prototype.webkitMatchesSelector ||
            function(s) {
                var matches = (this.document || this.ownerDocument).querySelectorAll(s),
                    i = matches.length;
                while (--i >= 0 && matches.item(i) !== this) {}
                return i > -1;
            };
    }

    document.body.addEventListener('click', function (e) {

        var el = e.target;

        var match = el.matches('[data-lang] > .copy');

        if (match) {

        }
    });

                </script>
                <h2>React - no webpack template</h2>
                <a href="https://reactjs.org/docs/add-react-to-a-website.html">Add React to a Website</a>
                <script type="editor" data-lang="html">
                
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="public/react/umd/react.production.min.js">&lt;/script>
    <script src="public/react-dom/umd/react-dom.production.min.js">&lt;/script>
    <script src="public/@babel/standalone/babel.min.js">&lt;/script>
        <!-- 
            yarn add @babel/standalone 
            homepage github repo:
                https://github.com/babel/babel-standalone 
            from cdn:
                https://reactjs.org/docs/add-react-to-a-website.html#quickly-try-jsx
        -->
    <script>window.React || document.write("run server using 'make start' it will link node_modules where it should be");>&lt;/script>
</head>
<body>
    <div id="app">
        Loading ...
    </div>
    <script type="text/babel">

        const log=(function(){try{return console.log}catch(e){return function(){}}}());

        const delay = (time, data) =>
            new Promise(
                resolve => time ? setTimeout(resolve, time, data) : resolve(data)
            )
        ;

        class Root extends React.Component {
            constructor(...args) {

                super(...args);

                this.state = {
                }
            }
            render() {
                return (
                    <div>It's working...</div>
                );
            }
        }
        ReactDOM.render(
            <Root
            />,
            document.getElementById('app')
        );
    &lt;/script>
</body>
</html>
        
                </script>
                <h2>Extract computed css property value</h2>
                <script type="editor" data-lang="js">
parseInt(window.getComputedStyle(document.querySelector('svg'), null).getPropertyValue("width"), 10)
                </script>
                <h2>fetch</h2>
                <script type="editor" data-lang="js">
// in order to get body and headers fetch require so much magic, this is sick... 
  
var log = console.log;             
var r = await fetch('');

// or:
var t = await r.text()
log(t.substring(0, 300))

// or:
//var j = await r.json()
//log(j)

const h = {}
r.headers.forEach((value, key) => h[key] = value)

//const h = await Promise.all(r.headers.entries());

log('headers', h)

log('oneheader', r.headers.get('Content-type'));
                </script>
                <h2>codepen, jsfiddle, codesandbox</h2>
                <a href="https://codesandbox.io/s/rjj38yzm14">codesandbox template</a>
            </div>
        </div>
    </div>
</body>
</html>
