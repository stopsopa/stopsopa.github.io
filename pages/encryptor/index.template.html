<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />

    <title>Encryptor - Data Encryption Tool</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/zero-md@3?register"></script>
  </head>
  <body nofoot nohead>
    <div class="body">
      <div id="encryptor">
        <style>
          body,
          body::before,
          body::after {
            background: #f2f3f3 !important;
            background-image: none !important;
            color: #000;
            touch-action: pan-x pan-y;
          }
          .body {
            display: block;
          }

          .body,
          .body::before,
          .body::after {
            background: #f2f3f3 !important;
            background-image: none !important;
            touch-action: pan-x pan-y;
          }

          .body .inside {
            max-width: 1400px;
            padding: 0;
            background: #f2f3f3 !important;
          }

          #encryptor {
            font-family: "Segoe UI", Roboto, Arial, sans-serif;
            padding: 8px;
            color: #111;

            h2 {
              font-size: 18px;
              padding: 10px 16px;
              margin: 0 0 8px 0;
              background: #fff;
              border: 1px solid #ddd;
              border-radius: 6px;
              display: flex;
              align-items: center;
              gap: 8px;
            }

            .compact-form {
              background: #fff;
              border: 1px solid #ddd;
              border-radius: 6px;
              padding: 10px 16px;
              margin-bottom: 8px;

              label {
                display: flex;
                flex-direction: column;
                gap: 4px;

                span {
                  font-size: 12px;
                  font-weight: 700;
                  color: #555;
                }
              }

              .key-row {
                display: flex;
                gap: 8px;
                align-items: center;
                flex-wrap: wrap;

                input {
                  flex: 1;
                  min-width: 150px;
                }

                .btn-group {
                  display: flex;
                  gap: 4px;
                }
              }
            }

            .main-grid {
              display: grid;
              grid-template-columns: 2fr 1fr;
              gap: 8px;
              margin-bottom: 8px;
            }

            @media (max-width: 800px) {
              .main-grid {
                grid-template-columns: 1fr;
              }
            }

            .panel {
              background: #fff;
              border: 1px solid #ddd;
              border-radius: 6px;
              padding: 12px;
              display: flex;
              flex-direction: column;
              gap: 8px;
              box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);

              .panel-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-size: 13px;
                font-weight: 700;
                border-bottom: 1px solid #eee;
                padding-bottom: 6px;
                margin-bottom: 4px;

                .lorem-btn {
                  background: none;
                  border: none;
                  color: #007185;
                  font-size: 11px;
                  text-decoration: underline;
                  cursor: pointer;
                  &:hover {
                    color: #c45500;
                  }
                }
              }

              label {
                display: flex;
                flex-direction: column;
                gap: 4px;
                width: 100%;

                span {
                  display: none; /* Hide internal labels since headers are clear */
                }
              }

              textarea {
                width: 100%;
                min-height: 120px;
                height: 120px;
                font-family: "Cascadia Code", Monaco, Consolas, monospace;
                font-size: 12px;
                padding: 8px;
                border: 1px solid #bbb;
                border-radius: 4px;
                resize: vertical;
                box-sizing: border-box;
                &:focus {
                  border-color: #e47911;
                  outline: none;
                  box-shadow: 0 0 0 2px rgba(228, 121, 17, 0.2);
                }
              }

              &.special {
                background-color: #f4f6f8;
                background-image: linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
                  linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px),
                  linear-gradient(rgba(0, 0, 0, 0.015) 1px, transparent 1px),
                  linear-gradient(90deg, rgba(0, 0, 0, 0.015) 1px, transparent 1px);
                background-size: 40px 40px, 40px 40px, 10px 10px, 10px 10px;
                border-color: #ccc;
                box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.02);

                .panel-header {
                  border-bottom-color: #d1d1d1;
                }

                textarea {
                  background-color: rgba(255, 255, 255, 0.95);
                  border-color: #999;
                  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
                }
              }
            }

            .panel-actions {
              display: flex;
              gap: 8px;
              align-items: center;
              margin-top: 4px;

              .link-group {
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 11px;
                overflow: hidden;

                .sharing-link {
                  color: #007185;
                  white-space: nowrap;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  max-width: 250px;
                }
              }

              .encrypt {
                margin-left: auto;
              }
            }

            button.action-btn {
              background: #ffd814;
              border: 1px solid #fcd200;
              border-radius: 20px;
              padding: 6px 16px;
              font-size: 13px;
              font-weight: 500;
              cursor: pointer;
              transition: background 0.2s;

              &:hover {
                background: #f7ca00;
              }

              &.copy-btn {
                background: #f0f2f2;
                border-color: #d5dbdb;
                &:hover {
                  background: #e3e6e6;
                }
              }

              &.copy-link-btn {
                background: #002f5d;
                border-color: #001a35;
                color: #fff;
                &:hover {
                  background: #003d7a;
                  border-color: #001a35;
                }
              }

              &.copy-btn,
              &.copy-link-btn {
                font-size: 11px;
                padding: 4px 12px;
              }
            }

            .full-width-panel {
              grid-column: span 2;
              @media (max-width: 800px) {
                grid-column: span 1;
              }
            }

            #encryptor input,
            #encryptor button.generate,
            #encryptor button.show {
              padding: 19px 10px;
              font-size: 12px;
              border: 1px solid #bbb;
              border-radius: 4px;
            }

            #encryptor a {
              font-size: 11px;
              color: #007185;
              text-decoration: none;
              &:hover {
                text-decoration: underline;
              }
            }

            @keyframes highlightFade {
              0% {
                box-shadow: 0 0 20px 8px rgba(255, 0, 0, 0.8), 0 0 0 4px rgba(255, 0, 0, 0.6) !important;
                border-color: #ff0000 !important;
              }
              20% {
                box-shadow: 0 0 20px 8px rgba(255, 0, 0, 0.8), 0 0 0 4px rgba(255, 0, 0, 0.6) !important;
                border-color: #ff0000 !important;
              }
              100% {
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0), 0 0 0 0 rgba(255, 0, 0, 0) !important;
                border-color: #bbb !important;
              }
            }

            textarea.highlight-success {
              animation: highlightFade 3s ease-out forwards !important;
            }

            .zero-md-container {
              border: 2px solid #888;
              border-radius: 4px;
              margin-top: 8px;
              padding: 8px;
              background: #fff;
              min-height: 50px;
            }
          }
        </style>

        <div id="encryptor">
          <form class="compact-form" action="#" onsubmit="return false;" autocomplete="off" spellcheck="false">
            <label>
              <span>Encryption Key</span>
              <div class="key-row">
                <!-- Visually hidden username field to satisfy password managers -->
                <input
                  type="text"
                  name="username"
                  id="username"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                  value="default"
                  style="position: absolute; width: 0; height: 0; opacity: 0; pointer-events: none"
                />
                <input
                  type="password"
                  class="key"
                  name="password"
                  id="password"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                  placeholder="Key..."
                />
                <div class="btn-group">
                  <button type="button" class="generate">Gen</button>
                  <button type="button" class="show">Show</button>
                  <button type="button" class="clear">Clear</button>
                </div>
                <a
                  href="https://github.com/stopsopa/gitstorage/blob/master/git%40github.com%3Astopsopa__stopsopa.github.io.git/.env#L63"
                  target="_blank"
                  >Docs</a
                >
                <span style="display: inline; color: #ccc">|</span>
                <a href="/pages/pastetool/pastetool.html" target="_blank">Paste</a>
              </div>
            </label>
            <!-- Dummy submit button to help Bitwarden trigger 'Save' dialog -->
            <button type="submit" style="display: none"></button>
          </form>

          <div class="main-grid">
            <div class="panel">
              <div class="panel-header">
                Input Message
                <button type="button" class="lorem-btn">Lorem Ipsum</button>
              </div>
              <textarea class="message" placeholder="Message to encrypt..."></textarea>
              <div class="panel-actions">
                <div class="link-group" style="display: none">
                  <button type="button" class="action-btn copy-link-btn">Copy</button>
                  <a href="#" class="sharing-link"></a>
                </div>
                <button class="action-btn encrypt">ðŸ”’ Encrypt</button>
              </div>
            </div>

            <div class="panel special">
              <div class="panel-header">Encrypted Output</div>
              <textarea class="encrypted" placeholder="Result..."></textarea>
              <div class="panel-actions">
                <button type="button" class="action-btn copy-btn" style="display: none">ðŸ“‹ Copy</button>
                <button type="button" class="action-btn decrypt">ðŸ”“ Decrypt</button>
              </div>
            </div>

            <div class="panel full-width-panel" id="d">
              <div class="panel-header">Decrypted Output</div>
              <textarea class="decrypted" placeholder="Decrypted result..."></textarea>
              <div class="zero-md-container">
                <zero-md class="decrypted-md"></zero-md>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        // Prevent double-tap to zoom on mobile devices
        (function () {
          let lastTouchEnd = 0;
          document.addEventListener(
            "touchend",
            function (event) {
              const now = new Date().getTime();
              if (now - lastTouchEnd <= 300) {
                event.preventDefault();
              }
              lastTouchEnd = now;
            },
            false
          );
          // Optional: also prevent pinch zoom
          document.addEventListener(
            "touchstart",
            function (event) {
              if (event.touches.length > 1) {
                event.preventDefault();
              }
            },
            { passive: false }
          );
        })();
      </script>
      <script type="module" src="bind.js"></script>
      <pre>aleph, bet, gimel, dalet, he, vav, zayin, het, tet, yod</pre>
    </div>
    <script type="module" src="/js/github.js"></script>
  </body>
</html>
